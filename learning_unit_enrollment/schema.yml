openapi: 3.0.0
servers:
 - url: https://{environment}.osis.uclouvain.be/api/v1/learning_unit_enrollment/
   variables:
     environment:
       default: dev
       enum:
         - dev # Development server
         - qa # Staging server
         - test # Test server
 - url: https://osis.uclouvain.be/api/v1/learning_unit_enrollment/
   description: 'Production server'
info:
  version: '1.0'
  title: 'Learning Unit Enrollment Service'
  description: |-
    A set of API endpoints that allow you to get information about learning unit enrollment
paths:
  /enrollments/:
    get:
      description: 'Return all enrollments of a given learning unit year'
      operationId: enrollments_list
      parameters:
        - $ref: '#/components/parameters/Accept-Language'
        - $ref: '#/components/parameters/X-User-FirstName'
        - $ref: '#/components/parameters/X-User-LastName'
        - $ref: '#/components/parameters/X-User-Email'
        - $ref: '#/components/parameters/X-User-GlobalID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnrollmentList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - enrollment
components:
  securitySchemes:
    Token:
      type: apiKey
      in: header
      name: Authorization
      description: Enter your token in the format **Token &lt;token>**
  parameters:
    X-User-FirstName:
      in: header
      name: X-User-FirstName
      schema:
        type: string
      required: false
    X-User-LastName:
      in: header
      name: X-User-LastName
      schema:
        type: string
      required: false
    X-User-Email:
      in: header
      name: X-User-Email
      schema:
        type: string
      required: false
    X-User-GlobalID:
      in: header
      name: X-User-GlobalID
      schema:
        type: string
      required: false
    Accept-Language:
      in: header
      name: Accept-Language
      description: >
        The header advertises which languages the client is able to understand, and which locale variant is preferred. (By languages, we mean natural languages, such as English, and not programming languages.)
      schema:
        $ref: '#/components/schemas/AcceptedLanguageEnum'
      required: false
  responses:
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    EnrollmentList:
      type: object
      properties:
        date_enrollment:
          type: string
          format: date
          example: "2021-09-06"
        enrollment_state:
          type: string
          example: "ENROLLED"
        student_last_name:
          type: string
          example: "Doe"
        student_first_name:
          type: string
          example: "John"
        student_email:
          type: string
          example: "john.doe@mail.xyz"
        student_registration_id:
          type: string
          example: "12345678"
        type_peps:
          $ref: '#/components/schemas/TypePepsEnum'
        sport_subtype_peps:
          $ref: '#/components/schemas/SportSubtypePepsEnum'
        disability_subtype_peps:
          $ref: '#/components/schemas/DisabilitySubtypePepsEnum'
        program:
          type: string
          example: "PRGM1BA"
        learning_unit_acronym:
          type: string
          example: "LABCD1234"
    TypePepsEnum:
      type: string
      enum:
        - 'NOT_DEFINED'
        - 'DISABILITY'
        - 'SPORT'
        - 'ARTIST'
        - 'ENTREPRENEUR'
        - 'ARRANGEMENT_JURY'
    SportSubtypePepsEnum:
      type: string
      enum:
        - 'PROMISING_ATHLETE_HL'
        - 'PROMISING_ATHLETE'
    DisabilitySubtypePepsEnum:
      type: string
      enum:
        - 'REDUCED_MOBILITY'
        - 'OTHER_DISABILITY'
    AcceptedLanguageEnum:
      type: string
      enum:
        - 'en'
        - 'fr-be'
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
security:
  - Token: []
